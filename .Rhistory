library(magrittr)
library(lubridate)
library(tidyverse)
library(gridExtra)
library(kableExtra
library(kableExtra)
filenames <- c('time_series_19-covid-Confirmed.csv', 'time_series_19-covid-Deaths.csv', 'time_series_19-covid-Recovered.csv') url.path <- paste0('https://raw.githubusercontent.com/CSSEGISandData/COVID-19/', 'master/csse_covid_19_data/csse_covid_19_time_series/')
filenames <- c('time_series_19-covid-Confirmed.csv', 'time_series_19-covid-Deaths.csv', 'time_series_19-covid-Recovered.csv')
url.path <- paste0('https://raw.githubusercontent.com/CSSEGISandData/COVID-19/', 'master/csse_covid_19_data/csse_covid_19_time_series/')
download <- function(filename) {
url <- file.path(url.path, filename)
dest <- file.path('./data', filename)
download.file(url, dest)
}
download <- function(filename) {
url <- file.path(url.path, filename)
dest <- file.path('./data', filename)
download.file(url, dest)
}
bin <- lapply(filenames, download)
bin <- lapply(filenames, download)
bin <- lapply(filenames, download)
filenames <- c('time_series_19-covid-Confirmed.csv', 'time_series_19-covid-Deaths.csv', 'time_series_19-covid-Recovered.csv')
url.path <- paste0('https://raw.githubusercontent.com/CSSEGISandData/COVID-19/', 'master/csse_covid_19_data/csse_covid_19_time_series/')
download <- function(filenames) {
url <- file.path(url.path, filenames)
dest <- file.path('./data', filenames)
download.file(url, dest)
}
bin <- lapply(filenames, download)
filename <- c('time_series_19-covid-Confirmed.csv', 'time_series_19-covid-Deaths.csv', 'time_series_19-covid-Recovered.csv')
url.path <- paste0('https://raw.githubusercontent.com/CSSEGISandData/COVID-19/', 'master/csse_covid_19_data/csse_covid_19_time_series/')
library(magrittr)
library(lubridate)
library(tidyverse)
library(gridExtra)
library(kableExtra)
filename <- c('time_series_19-covid-Confirmed.csv', 'time_series_19-covid-Deaths.csv', 'time_series_19-covid-Recovered.csv')
url.path <- paste0('https://raw.githubusercontent.com/CSSEGISandData/COVID-19/', 'master/csse_covid_19_data/csse_covid_19_time_series/')
download <- function(filename) {
url <- file.path(url.path, filename)
dest <- file.path('./data', filename)
download.file(url, dest)
}
bin <- lapply(filename, download)
library(tidyverse)
install.packages("lubridate")
library(lubridate)
library(magrittr)
library(gridExtra)
library(kableExtra)
library(dplyr)
filenames <- c('time_series_19-covid-Confirmed.csv',
'time_series_19-covid-Deaths.csv',
'time_series_19-covid-Recovered.csv')
url.path <- paste0('https://raw.githubusercontent.com/CSSEGISandData/COVID-19/',
'master/csse_covid_19_data/csse_covid_19_time_series/')
## download files to local
download <- function(filename) {
url <- file.path(url.path, filename)
dest <- file.path('./data', filename)
download.file(url, dest)
}
bin <- lapply(filenames, download)
setwd
setwd()
setwd("~/Github/COVID-19")
getwd
getwd()
## download files to local
download <- function(filename) {
url <- file.path(url.path, filename)
dest <- file.path('./data', filename)
download.file(url, dest)
}
bin <- lapply(filenames, download)
data.confirmed <- read.csv('./data/time_series_19-covid-Confirmed.csv')
n.col <- ncol(data.confirmed)
dates <- names(data.confirmed)[5:n.col] %>% substr(2,8) %>% mdy()
range(dates)
cleanData <- function(data) {
## remove some columns
data %<>% select(-c(Province.State, Lat, Long)) %>% rename(country=Country.Region)
## convert from wide to long format
data %<>% gather(key=date, value=count, -country)
## convert from character to date
data %<>% mutate(date = date %>% substr(2,8) %>% mdy())
## aggregate by country
data %<>% group_by(country, date) %>% summarise(count=sum(count)) %>% as.data.frame()
return(data)
}
data.confirmed %<>% cleanData() %>% rename(confirmed=count)
