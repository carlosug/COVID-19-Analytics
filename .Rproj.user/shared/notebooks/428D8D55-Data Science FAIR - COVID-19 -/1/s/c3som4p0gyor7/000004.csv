"0",""
"0","# death rate base on total deaths and recovered cases"
"0","data %<>% mutate(rate.upper = (100 *deaths / (deaths + recovered)) %>% round(1))"
"0","# lower bound: death rate based on total confirmed cases"
"0","data %<>% mutate(rate.lower = (100 * deaths / confirmed) %>% round(1))"
"0","# death rate based on number f death/recovered on every single day"
"0","data %<>% mutate(rate.daily = (100 * deaths.new / (deaths.new + recovered.new)) %>% round(1))"
"0","                                                        "
"0","# convert from wide to long format, for drawing area plot"
"0","data.long <- data %>%"
"0","  select(c(country, date, confirmed, remaining.confirmed, recovered, deaths)) %>%"
"0","  gather(key = type, value = count, -c(country,date))"
"0","# set for factor levels to show them in a desirable order"
"0","data.long %<>% mutate(type =recode_factor(type, confirmed= 'Total Confirmed',"
"0","                                          remaining.confirmed = 'Remaining Confirmed',"
"0","                                          recovered= 'Recovered',"
"0","                                          deaths='Deaths'))"
"0",""
"0","# convert from wide to long format, for drawing area plots"
"0","rates.long <- data %>%"
"0","  select(c(country, date, rate.upper, rate.lower, rate.daily)) %>% "
"0","  gather(key = type, value=count, -c(country,date))"
"0","# set factor levels for desired order"
"0","rates.long %<>% mutate(type =recode_factor(type, rate.daily = 'Daily',"
"0","                                           rate.lower = 'Lower bound',"
"0","                                           rate.upper = 'Upper bound'))"
"0",""
