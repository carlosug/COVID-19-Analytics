"0",""
"0","## add 'Others'"
"0","top.countries %<>% c('Others')"
"0","## put all others in a single group of 'Others'"
"0","df <- data.latest %>% filter(!is.na(country) & country!= 'World')%>%"
"0","  mutate(country=ifelse(ranking <= 11, as.character(country), 'Others')) %>%"
"0","  mutate(country=country %>% factor(levels = c(top.countries)))"
"0","df %<>% group_by(country) %>% summarise(confirmed=sum(confirmed))  "
"0",""
"0","# percentage and label"
"0","df %<>% mutate(per = (100*confirmed/sum(confirmed)) %>% round(1)) %>%"
"0","                 mutate(txt = paste0(country, ': ', confirmed, '(', per, '%)'))"
"0","df %>% ggplot(aes(fill=country)) +"
"0","  geom_bar(aes(x ='', y = per), stat= 'identity') +"
"0","  coord_polar('y', start =0) +"
"0","  xlab('') + ylab('Percentage (%)') +"
"0","  labs(title=paste0('Top 10 Countries with Most Confirmed Cases (', max.date,')')) +"
"0","  scale_fill_discrete(name='Country', labels = df$txt)"
