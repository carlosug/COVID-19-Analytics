"0","names(data.latest.all)"
"1"," [1]"
"1"," ""country""            "
"1"," ""date""               "
"1"," ""confirmed""          "
"1"," ""confirmed.new""      "
"1"," ""remaining.confirmed"""
"1","
"
"1"," [6]"
"1"," ""recovered""          "
"1"," ""deaths.new""         "
"1"," ""deaths""             "
"1"," ""death.rate""         "
"1"," ""ranking""            "
"1","
"
"0","## add 'Others'"
"0","top.countries %<>% c('Others')"
"0","## put all others in a single group of 'Others'"
"0","data.latest <- data.latest.all %>% filter(!is.na(country)) %>%"
"0","mutate(country=ifelse(ranking <= k + 1, as.character(country), 'Others')) %>%"
"0","mutate(country=country %>% factor(levels=c(top.countries)))"
"0",""
"0","data.latest %<>% group_by(country) %>%"
"0","  summarise(confirmed=sum(confirmed), confirmed.new=sum(confirmed.new), remaining.confirmed = sum(remaining.confirmed), recovered = sum(recovered),deaths=sum(deaths), deaths.new = sum(deaths.new)) %>%"
"0","              mutate(death.rate=(100*deaths/confirmed) %>% round(1))"
"0","data.latest %<>% select(c(country, confirmed, deaths,death.rate, confirmed.new, deaths.new,remaining.confirmed))"
"0",""
"0","data.latest %>% mutate(death.rate=death.rate %>% format(nsmall=1) %>% paste0('%')) %>% kable('latex', booktabs=T, row.names=T, align=c('l', rep('r', 6)), caption=paste0('Cases in Top 20 Countries - ', max.date.txt,'.'), format.args=list(big.mark=',')) %>% kable_styling(font_size=7, latex_options=c('striped', 'hold_position', 'repeat_header'))"
